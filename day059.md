ğŸ“‚ í”„ë¡œì íŠ¸ ì£¼ìš” êµ¬ì„±
1. src/main/java
- controller (com.theja703.controller)
- AppUserController.java
â†’ ì›¹ ìš”ì²­ì„ ë°›ì•„ì„œ ì„œë¹„ìŠ¤ ê³„ì¸µìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” ì—­í• . MVC íŒ¨í„´ì—ì„œ C(Controller) ë¶€ë¶„ì…ë‹ˆë‹¤.
- dao (com.theja703.dao)
- AppUserDao.java, MbtjDao.java, TestDao.java
â†’ DBì™€ ì§ì ‘ ì—°ê²°ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤. MyBatis ë§¤í¼ XMLê³¼ ì—°ê²°ë˜ì–´ SQLì„ ì‹¤í–‰í•©ë‹ˆë‹¤.
- service (com.theja703.service)
- AppUserService.java, AppUserServiceImpl.java
â†’ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ë‹¹. DAOë¥¼ í˜¸ì¶œí•´ì„œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê³ , Controllerì— ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
- dto (com.theja703.dto)
- AppUserDto ë“±
â†’ DB í…Œì´ë¸”ê³¼ ë§¤í•‘ë˜ëŠ” ë°ì´í„° ê°ì²´. Controller â†” Service â†” DAO ê°„ ë°ì´í„° ì „ë‹¬ì— ì‚¬ìš©ë©ë‹ˆë‹¤.

2. config (ì„¤ì • íŒŒì¼)
- appuser-mapper.xml â†’ MyBatis SQL ë§¤í¼ (insert, update, delete, select ì¿¼ë¦¬ ì •ì˜)
- db.properties â†’ DB ì—°ê²° ì •ë³´ (URL, ê³„ì •, ë¹„ë°€ë²ˆí˜¸ ë“±)
- mybatis-config.xml â†’ MyBatis ì „ì—­ ì„¤ì • (í™˜ê²½, ë§¤í¼ ë“±ë¡ ë“±)
- root-context.xml â†’ Spring Bean ì„¤ì • (Service, DAO ë“±)
- servlet-context.xml â†’ DispatcherServlet ì„¤ì •, ViewResolver ë“±
- test-mapper.xml â†’ í…ŒìŠ¤íŠ¸ìš© ë§¤í¼

3. src/test/java
- Test1_Board.java
â†’ JUnit ê¸°ë°˜ í…ŒìŠ¤íŠ¸ ì½”ë“œ. DAO/Service/Controller ë™ì‘ì„ ê²€ì¦í•©ë‹ˆë‹¤.

4. src/main/resources
- log4j2.properties, log4jdbc.log4j2.properties
â†’ ë¡œê¹… ì„¤ì •. SQL ì‹¤í–‰ ë¡œê·¸ë¥¼ ë³´ê¸° ìœ„í•´ log4jdbc ì‚¬ìš©.

5. webapp (View ê³„ì¸µ)
- view/inc â†’ ê³µí†µ JSP (header.jsp, footer.jsp)
- view/member â†’ íšŒì› ê´€ë ¨ JSP (join.jsp, list.jsp, edit.jsp, delete.jsp)
- META-INF â†’ ë©”íƒ€ë°ì´í„°

6. ë¼ì´ë¸ŒëŸ¬ë¦¬/í™˜ê²½
- JRE System Library [JavaSE-11] â†’ Java 11 ì‚¬ìš©
- Apache Tomcat v9.0 â†’ WAS (ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„)
- Maven Dependencies â†’ Spring, MyBatis, JDBC, Log4j ë“± ì˜ì¡´ì„± ê´€ë¦¬
- JUnit 4 â†’ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬

âš™ï¸ ì „ì²´ ë™ì‘ íë¦„ (MVC + MyBatis)
- ì‚¬ìš©ì ìš”ì²­ (JSP â†’ Controller)
ì˜ˆ: íšŒì›ê°€ì… í¼ ì œì¶œ â†’ AppUserControllerë¡œ ì „ë‹¬
- Controller â†’ Service í˜¸ì¶œ
ControllerëŠ” ìš”ì²­ì„ Serviceë¡œ ë„˜ê²¨ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰
- Service â†’ DAO í˜¸ì¶œ
ServiceëŠ” DAOë¥¼ í†µí•´ DB ì‘ì—… ìˆ˜í–‰
- DAO â†’ MyBatis ë§¤í¼ XML ì‹¤í–‰
SQL ì‹¤í–‰ í›„ ê²°ê³¼ ë°˜í™˜
- Service â†’ Controller â†’ JSP(View)
ê²°ê³¼ë¥¼ ë‹¤ì‹œ Controllerë¡œ ì „ë‹¬í•˜ê³ , JSPì— ë Œë”ë§

âœ¨ ìš”ì•½
- Controller: ìš”ì²­ ì²˜ë¦¬
- Service: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- DAO + Mapper XML: DB ì ‘ê·¼
- DTO: ë°ì´í„° ì „ë‹¬ ê°ì²´
- JSP(View): í™”ë©´ ì¶œë ¥
- Config: Spring/MyBatis í™˜ê²½ ì„¤ì •

ğŸ‘‰ ì´ êµ¬ì¡°ëŠ” Spring MVC + MyBatis + JSPì˜ ì „í˜•ì ì¸ íŒ¨í„´ì…ë‹ˆë‹¤.
í˜¹ì‹œ ì›í•˜ì‹œë©´ ì œê°€ íšŒì›ê°€ì… íë¦„ì´ë‚˜ ë¡œê·¸ì¸ íë¦„ì„ ì‹¤ì œ ì½”ë“œ ê¸°ì¤€ìœ¼ë¡œ ë‹¨ê³„ë³„ë¡œ ì„¤ëª…í•´ë“œë¦´ ìˆ˜ë„ ìˆì–´ìš”. ì›í•˜ì‹œëŠ” íë¦„ì„ ë§ì”€í•´ì£¼ì‹¤ë˜ìš”?


ğŸ§© íšŒì›ê°€ì… ì „ì²´ íë¦„
1. ì‚¬ìš©ì ì…ë ¥ (View, JSP)
- ì‚¬ìš©ìê°€ join.jsp í™”ë©´ì—ì„œ ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸, MBTI íƒ€ì… ë“±ì„ ì…ë ¥í•˜ê³  ì œì¶œí•©ë‹ˆë‹¤.
- <form> íƒœê·¸ë¥¼ í†µí•´ POST /appuser/join ê°™ì€ URLë¡œ ìš”ì²­ì´ ì „ë‹¬ë©ë‹ˆë‹¤.

2. Controller (AppUserController)
- AppUserControllerê°€ í•´ë‹¹ ìš”ì²­ì„ ë°›ì•„ì„œ DTO(AppUserDto) ê°ì²´ì— í¼ ë°ì´í„°ë¥¼ ë°”ì¸ë”©í•©ë‹ˆë‹¤.
- ControllerëŠ” Service ê³„ì¸µì„ í˜¸ì¶œí•©ë‹ˆë‹¤:
@PostMapping("/join")
public String join(AppUserDto dto) {
    appUserService.insert(dto);
    return "redirect:/member/list";
}



3. Service (AppUserServiceImpl)
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ë‹¹í•˜ëŠ” Serviceê°€ DAOë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
- ì˜ˆ: appUserService.insert(dto) â†’ ë‚´ë¶€ì—ì„œ appUserDao.insert(dto) ì‹¤í–‰
- ì—¬ê¸°ì„œ ì¤‘ë³µ ì´ë©”ì¼ ì²´í¬ ê°™ì€ ë¡œì§ì„ ì¶”ê°€í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

4. DAO (AppUserDao + Mapper XML)
- DAO ì¸í„°í˜ì´ìŠ¤ëŠ” MyBatis ë§¤í¼ XMLê³¼ ì—°ê²°ë©ë‹ˆë‹¤.
- appuser-mapper.xmlì˜ <insert> êµ¬ë¬¸ì´ ì‹¤í–‰ë©ë‹ˆë‹¤:
<insert id="insert" parameterType="AppUserDto">
  INSERT INTO appuser (APP_USER_ID, EMAIL, PASSWORD, MBTI_TYPE_ID, CREATED_AT)
  VALUES (appuserid_seq.nextval, #{email}, #{password}, #{mbtiTypeId}, #{createdAt, jdbcType=TIMESTAMP})
</insert>

î·™î·š

5. DB (Oracle)
- appuser í…Œì´ë¸”ì— ìƒˆë¡œìš´ ë ˆì½”ë“œê°€ ì¶”ê°€ë©ë‹ˆë‹¤.
- APP_USER_IDëŠ” ì‹œí€€ìŠ¤(appuserid_seq.nextval)ë¡œ ìë™ ì¦ê°€.
- EMAILì€ UNIQUE ì œì•½ì¡°ê±´ì´ ê±¸ë ¤ ìˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì¤‘ë³µ ì‹œ ORA-00001 ì˜¤ë¥˜ ë°œìƒ.

6. ê²°ê³¼ ë°˜í™˜
- DAO â†’ Service â†’ Controllerë¡œ ì„±ê³µ ì—¬ë¶€ê°€ ì „ë‹¬ë©ë‹ˆë‹¤.
- ControllerëŠ” ì„±ê³µ ì‹œ íšŒì› ëª©ë¡ í˜ì´ì§€(list.jsp)ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸í•˜ê±°ë‚˜, ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.

âš™ï¸ íë¦„ ìš”ì•½
- join.jsp â†’ ì‚¬ìš©ì ì…ë ¥
- AppUserController â†’ ìš”ì²­ ì²˜ë¦¬, DTO ìƒì„±
- AppUserServiceImpl â†’ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- AppUserDao + appuser-mapper.xml â†’ SQL ì‹¤í–‰
- Oracle DB â†’ ë°ì´í„° ì €ì¥
- ê²°ê³¼ JSP â†’ ì„±ê³µ/ì‹¤íŒ¨ í™”ë©´ ì¶œë ¥

ğŸ‘‰ ì´ êµ¬ì¡°ì—ì„œ ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œëŠ”:
- EMAIL ì¤‘ë³µ â†’ DuplicateKeyException
- createdAtì´ nullì¸ë° jdbcType ë¯¸ì§€ì • â†’ JdbcType OTHER ì˜¤ë¥˜
- ì˜ëª»ëœ ì»¬ëŸ¼ëª…(id vs app_user_id) â†’ ORA-00904 invalid identifier




#6. Upload
  1. model
    >table:ì´ë¯¸ì§€ ê²½ë¡œí•„ë“œ

    desc sboard1;
    Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------
 ID                                        NOT NULL NUMBER
 APP_USER_ID                               NOT NULL NUMBER
 BTITLE                                    NOT NULL VARCHAR2(1000)
 BCONTENT                                  NOT NULL CLOB
 BPASS                                     NOT NULL VARCHAR2(255)
 BFILE                                              VARCHAR2(255)
 BHIT                                               NUMBER(10)
 BIP                                       NOT NULL VARCHAR2(255)
 CREATED_AT                                         TIMESTAMP(6)

 > dto: bfile
 > dao: insert, update

----------------------
	<insert id="insert2"
		parameterType="Sboard1Dto">
		
		insert into sboard1(ID , APP_USER_ID, BTITLE, BCONTENT, BPASS,BFILE,BIP)
    values (sboard1_seq.nextval , #{appUserId}, #{btitle}, #{bcontent}, #{bpass},#{bfile} #{bip})
	</insert>
	----------------------

  -----------------------
	<update  id="update2"  parameterType="Sboard1Dto">
	update sboard1
        set BTITLE= #{btitle}, BCONTENT=#{bcontent}, BFILE=#{bfile}
        where id=#{id} and BPASS=#{bpass}	
	</update>
    -----------------------


 2. view
    form: encType = "multipart/form-data"  
      method="post"
      <input type="file" />

 3. controller

     pom.xml
              <!-- img upload   start -->
              <!-- img upload   start -->
              <!-- https://mvnrepository.com/artifact/commons-fileupload/commons-fileupload -->
              <dependency>
                  <groupId>commons-fileupload</groupId>
                  <artifactId>commons-fileupload</artifactId>
                  <version>1.3.1</version>
              </dependency>
              <!-- img upload end -->q
              <!-- img upload end -->      

     servlet-context.xml
     FilUpload.java
     Controller.java - service



7. Ajax

1. ê¸€ ê²€ìƒ‰
2. ì•„ì´ë””ì¤‘ë³µê²€ì‚¬
3. ìœ ì € ìˆ˜ì €, ì‚­ì œ

S
1) model
table, dto, dao#, service
select * from emp  where like '%S%';

>table - sql: í•´ë‹¹ì•„ì´ë””ê°€ ìˆëŠ”ì§€ ê²€ìƒ‰ - sql ì‘ì„±  appuser
  select * from appuser  where email='1@1';
>dto:
>dao:



2) controller
@RestController  //@Controller + @ResponseBody
http://localhost:8282/spring005/selectSearch?search=t
2) view (ajax)