ğŸ“‚ í”„ë¡œì íŠ¸ ì£¼ìš” êµ¬ì„±
1. src/main/java
- controller (com.theja703.controller)
- AppUserController.java
â†’ ì›¹ ìš”ì²­ì„ ë°›ì•„ì„œ ì„œë¹„ìŠ¤ ê³„ì¸µìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” ì—­í• . MVC íŒ¨í„´ì—ì„œ C(Controller) ë¶€ë¶„ì…ë‹ˆë‹¤.
- dao (com.theja703.dao)
- AppUserDao.java, MbtjDao.java, TestDao.java
â†’ DBì™€ ì§ì ‘ ì—°ê²°ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤. MyBatis ë§¤í¼ XMLê³¼ ì—°ê²°ë˜ì–´ SQLì„ ì‹¤í–‰í•©ë‹ˆë‹¤.
- service (com.theja703.service)
- AppUserService.java, AppUserServiceImpl.java
â†’ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ë‹¹. DAOë¥¼ í˜¸ì¶œí•´ì„œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê³ , Controllerì— ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
- dto (com.theja703.dto)
- AppUserDto ë“±
â†’ DB í…Œì´ë¸”ê³¼ ë§¤í•‘ë˜ëŠ” ë°ì´í„° ê°ì²´. Controller â†” Service â†” DAO ê°„ ë°ì´í„° ì „ë‹¬ì— ì‚¬ìš©ë©ë‹ˆë‹¤.

2. config (ì„¤ì • íŒŒì¼)
- appuser-mapper.xml â†’ MyBatis SQL ë§¤í¼ (insert, update, delete, select ì¿¼ë¦¬ ì •ì˜)
- db.properties â†’ DB ì—°ê²° ì •ë³´ (URL, ê³„ì •, ë¹„ë°€ë²ˆí˜¸ ë“±)
- mybatis-config.xml â†’ MyBatis ì „ì—­ ì„¤ì • (í™˜ê²½, ë§¤í¼ ë“±ë¡ ë“±)
- root-context.xml â†’ Spring Bean ì„¤ì • (Service, DAO ë“±)
- servlet-context.xml â†’ DispatcherServlet ì„¤ì •, ViewResolver ë“±
- test-mapper.xml â†’ í…ŒìŠ¤íŠ¸ìš© ë§¤í¼

3. src/test/java
- Test1_Board.java
â†’ JUnit ê¸°ë°˜ í…ŒìŠ¤íŠ¸ ì½”ë“œ. DAO/Service/Controller ë™ì‘ì„ ê²€ì¦í•©ë‹ˆë‹¤.

4. src/main/resources
- log4j2.properties, log4jdbc.log4j2.properties
â†’ ë¡œê¹… ì„¤ì •. SQL ì‹¤í–‰ ë¡œê·¸ë¥¼ ë³´ê¸° ìœ„í•´ log4jdbc ì‚¬ìš©.

5. webapp (View ê³„ì¸µ)
- view/inc â†’ ê³µí†µ JSP (header.jsp, footer.jsp)
- view/member â†’ íšŒì› ê´€ë ¨ JSP (join.jsp, list.jsp, edit.jsp, delete.jsp)
- META-INF â†’ ë©”íƒ€ë°ì´í„°

6. ë¼ì´ë¸ŒëŸ¬ë¦¬/í™˜ê²½
- JRE System Library [JavaSE-11] â†’ Java 11 ì‚¬ìš©
- Apache Tomcat v9.0 â†’ WAS (ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„)
- Maven Dependencies â†’ Spring, MyBatis, JDBC, Log4j ë“± ì˜ì¡´ì„± ê´€ë¦¬
- JUnit 4 â†’ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬

âš™ï¸ ì „ì²´ ë™ì‘ íë¦„ (MVC + MyBatis)
- ì‚¬ìš©ì ìš”ì²­ (JSP â†’ Controller)
ì˜ˆ: íšŒì›ê°€ì… í¼ ì œì¶œ â†’ AppUserControllerë¡œ ì „ë‹¬
- Controller â†’ Service í˜¸ì¶œ
ControllerëŠ” ìš”ì²­ì„ Serviceë¡œ ë„˜ê²¨ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰
- Service â†’ DAO í˜¸ì¶œ
ServiceëŠ” DAOë¥¼ í†µí•´ DB ì‘ì—… ìˆ˜í–‰
- DAO â†’ MyBatis ë§¤í¼ XML ì‹¤í–‰
SQL ì‹¤í–‰ í›„ ê²°ê³¼ ë°˜í™˜
- Service â†’ Controller â†’ JSP(View)
ê²°ê³¼ë¥¼ ë‹¤ì‹œ Controllerë¡œ ì „ë‹¬í•˜ê³ , JSPì— ë Œë”ë§

âœ¨ ìš”ì•½
- Controller: ìš”ì²­ ì²˜ë¦¬
- Service: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- DAO + Mapper XML: DB ì ‘ê·¼
- DTO: ë°ì´í„° ì „ë‹¬ ê°ì²´
- JSP(View): í™”ë©´ ì¶œë ¥
- Config: Spring/MyBatis í™˜ê²½ ì„¤ì •

ğŸ‘‰ ì´ êµ¬ì¡°ëŠ” Spring MVC + MyBatis + JSPì˜ ì „í˜•ì ì¸ íŒ¨í„´ì…ë‹ˆë‹¤.
í˜¹ì‹œ ì›í•˜ì‹œë©´ ì œê°€ íšŒì›ê°€ì… íë¦„ì´ë‚˜ ë¡œê·¸ì¸ íë¦„ì„ ì‹¤ì œ ì½”ë“œ ê¸°ì¤€ìœ¼ë¡œ ë‹¨ê³„ë³„ë¡œ ì„¤ëª…í•´ë“œë¦´ ìˆ˜ë„ ìˆì–´ìš”. ì›í•˜ì‹œëŠ” íë¦„ì„ ë§ì”€í•´ì£¼ì‹¤ë˜ìš”?


ğŸ§© íšŒì›ê°€ì… ì „ì²´ íë¦„
1. ì‚¬ìš©ì ì…ë ¥ (View, JSP)
- ì‚¬ìš©ìê°€ join.jsp í™”ë©´ì—ì„œ ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸, MBTI íƒ€ì… ë“±ì„ ì…ë ¥í•˜ê³  ì œì¶œí•©ë‹ˆë‹¤.
- <form> íƒœê·¸ë¥¼ í†µí•´ POST /appuser/join ê°™ì€ URLë¡œ ìš”ì²­ì´ ì „ë‹¬ë©ë‹ˆë‹¤.

2. Controller (AppUserController)
- AppUserControllerê°€ í•´ë‹¹ ìš”ì²­ì„ ë°›ì•„ì„œ DTO(AppUserDto) ê°ì²´ì— í¼ ë°ì´í„°ë¥¼ ë°”ì¸ë”©í•©ë‹ˆë‹¤.
- ControllerëŠ” Service ê³„ì¸µì„ í˜¸ì¶œí•©ë‹ˆë‹¤:
@PostMapping("/join")
public String join(AppUserDto dto) {
    appUserService.insert(dto);
    return "redirect:/member/list";
}



3. Service (AppUserServiceImpl)
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ë‹¹í•˜ëŠ” Serviceê°€ DAOë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
- ì˜ˆ: appUserService.insert(dto) â†’ ë‚´ë¶€ì—ì„œ appUserDao.insert(dto) ì‹¤í–‰
- ì—¬ê¸°ì„œ ì¤‘ë³µ ì´ë©”ì¼ ì²´í¬ ê°™ì€ ë¡œì§ì„ ì¶”ê°€í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

4. DAO (AppUserDao + Mapper XML)
- DAO ì¸í„°í˜ì´ìŠ¤ëŠ” MyBatis ë§¤í¼ XMLê³¼ ì—°ê²°ë©ë‹ˆë‹¤.
- appuser-mapper.xmlì˜ <insert> êµ¬ë¬¸ì´ ì‹¤í–‰ë©ë‹ˆë‹¤:
<insert id="insert" parameterType="AppUserDto">
  INSERT INTO appuser (APP_USER_ID, EMAIL, PASSWORD, MBTI_TYPE_ID, CREATED_AT)
  VALUES (appuserid_seq.nextval, #{email}, #{password}, #{mbtiTypeId}, #{createdAt, jdbcType=TIMESTAMP})
</insert>

î·™î·š

5. DB (Oracle)
- appuser í…Œì´ë¸”ì— ìƒˆë¡œìš´ ë ˆì½”ë“œê°€ ì¶”ê°€ë©ë‹ˆë‹¤.
- APP_USER_IDëŠ” ì‹œí€€ìŠ¤(appuserid_seq.nextval)ë¡œ ìë™ ì¦ê°€.
- EMAILì€ UNIQUE ì œì•½ì¡°ê±´ì´ ê±¸ë ¤ ìˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì¤‘ë³µ ì‹œ ORA-00001 ì˜¤ë¥˜ ë°œìƒ.

6. ê²°ê³¼ ë°˜í™˜
- DAO â†’ Service â†’ Controllerë¡œ ì„±ê³µ ì—¬ë¶€ê°€ ì „ë‹¬ë©ë‹ˆë‹¤.
- ControllerëŠ” ì„±ê³µ ì‹œ íšŒì› ëª©ë¡ í˜ì´ì§€(list.jsp)ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸í•˜ê±°ë‚˜, ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.

âš™ï¸ íë¦„ ìš”ì•½
- join.jsp â†’ ì‚¬ìš©ì ì…ë ¥
- AppUserController â†’ ìš”ì²­ ì²˜ë¦¬, DTO ìƒì„±
- AppUserServiceImpl â†’ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- AppUserDao + appuser-mapper.xml â†’ SQL ì‹¤í–‰
- Oracle DB â†’ ë°ì´í„° ì €ì¥
- ê²°ê³¼ JSP â†’ ì„±ê³µ/ì‹¤íŒ¨ í™”ë©´ ì¶œë ¥

ğŸ‘‰ ì´ êµ¬ì¡°ì—ì„œ ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œëŠ”:
- EMAIL ì¤‘ë³µ â†’ DuplicateKeyException
- createdAtì´ nullì¸ë° jdbcType ë¯¸ì§€ì • â†’ JdbcType OTHER ì˜¤ë¥˜
- ì˜ëª»ëœ ì»¬ëŸ¼ëª…(id vs app_user_id) â†’ ORA-00904 invalid identifier




#6. Upload
  1. model
    >table:ì´ë¯¸ì§€ ê²½ë¡œí•„ë“œ

    desc sboard1;
    Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------
 ID                                        NOT NULL NUMBER
 APP_USER_ID                               NOT NULL NUMBER
 BTITLE                                    NOT NULL VARCHAR2(1000)
 BCONTENT                                  NOT NULL CLOB
 BPASS                                     NOT NULL VARCHAR2(255)
 BFILE                                              VARCHAR2(255)
 BHIT                                               NUMBER(10)
 BIP                                       NOT NULL VARCHAR2(255)
 CREATED_AT                                         TIMESTAMP(6)

 > dto: bfile
 > dao: insert, update

----------------------
	<insert id="insert2"
		parameterType="Sboard1Dto">
		
		insert into sboard1(ID , APP_USER_ID, BTITLE, BCONTENT, BPASS,BFILE,BIP)
    values (sboard1_seq.nextval , #{appUserId}, #{btitle}, #{bcontent}, #{bpass},#{bfile} #{bip})
	</insert>
	----------------------

  -----------------------
	<update  id="update2"  parameterType="Sboard1Dto">
	update sboard1
        set BTITLE= #{btitle}, BCONTENT=#{bcontent}, BFILE=#{bfile}
        where id=#{id} and BPASS=#{bpass}	
	</update>
    -----------------------


 2. view
    form: encType = "multipart/form-data"  
      method="post"
      <input type="file" />

 3. controller

     pom.xml
              <!-- img upload   start -->
              <!-- img upload   start -->
              <!-- https://mvnrepository.com/artifact/commons-fileupload/commons-fileupload -->
              <dependency>
                  <groupId>commons-fileupload</groupId>
                  <artifactId>commons-fileupload</artifactId>
                  <version>1.3.1</version>
              </dependency>
              <!-- img upload end -->q
              <!-- img upload end -->      

     servlet-context.xml
     FilUpload.java
     Controller.java - service



7. Ajax

1. ê¸€ ê²€ìƒ‰
2. ì•„ì´ë””ì¤‘ë³µê²€ì‚¬
3. ìœ ì € ìˆ˜ì €, ì‚­ì œ

S
1) model
table, dto, dao#, service
select * from emp  where like '%S%';

>table - sql: í•´ë‹¹ì•„ì´ë””ê°€ ìˆëŠ”ì§€ ê²€ìƒ‰ - sql ì‘ì„±  appuser
  select * from appuser  where email='1@1';
>dto:
>dao:



2) controller
@RestController  //@Controller + @ResponseBody
http://localhost:8282/spring005/selectSearch?search=t
2) view (ajax)


---------------------
#8. AOP + Mybatis
---------------------
1. AOP ê°œìš”
STEP1)
- í•µì‹¬ê¸°ëŠ¥ : (ë¹„ì§€ë‹ˆìŠ¤ë¡œì§)
- ë¶€ê°€ê¸°ëŠ¥ : í•µì‹¬ê¸°ëŠ¥(ë¹„ì§€ë‹ˆìŠ¤ë¡œì§)ì„ ë„ì™€ì¤Œ
>> AOP - ë¶€ê°€ê¸°ëŠ¥

  @Controller    /list.do
          â–  ë¶€ê°€ê¸°ëŠ¥                    â–  ë¶€ê°€ê¸°ëŠ¥
         [ì‹œì‘]-  Service  (ì „ì²´ë¦¬ìŠ¤íŠ¸ë½‘ì•„ì£¼ëŠ” service) -[ë]
             |  ì²˜ë¦¬ë·°   
             â†“
         [ì‹œì‘]- Repository(ì „ì²´ë¦¬ìŠ¤íŠ¸ë½‘ì•„ì£¼ëŠ” sql   )  -[ë]


STEP2) Aspect
- ê¸°ëŠ¥ë¶„ë¦¬
- ëŸ°íƒ€ì„ ì‹œ í•„ìš”í•œ ìœ„ì¹˜ì— ë™ì ìœ¼ë¡œ ì²˜ë¦¬
        Advice + PointCut = Aspect
  ë¶€ê°€ê¸°ëŠ¥ì •ì˜   ì ìš©ë¶€ìœ„

STEP3) ìš©ì–´
Target   -  ëŒ€ìƒ
Advice   -  ë¶€ê°€ê¸°ëŠ¥
PointCut -  ì ìš©í•  íƒ€ê²Ÿì˜ ë©”ì„œë“œë¥¼ ì„ ë³„í•˜ëŠ” ì •ê·œì‹
Weaving  -  Targetì— ë¶€ê°€ê¸°ëŠ¥ ì²˜ë¦¬(ì‚½ì…)í•˜ëŠ” ê³¼ì •


STEP4) 
<<BEFORE>>         
application         
[
 [  ë¹„ì§€ë‹ˆìŠ¤ë¡œì§    ]
 [  ë³´ì•ˆ, ì¸ì¦, ë¡œì§]
]

<<AFTER>>
application         
[
 **********************           
 *[   PointCut ì ìš©ë¶€ìœ„ ]    Weaving  â†’    [  ë¹„ì§€ë‹ˆìŠ¤ë¡œì§    ]
        â†‘
 *[   Advice ë¶€ê°€ê¸°ëŠ¥   ] *
       â†‘
 *[  ë³´ì•ˆ, ì¸ì¦, ë¡œì§   ] *
 *   [Aspect]
 **********************  
]
Target   -  ëŒ€ìƒ
Advice   -  ë¶€ê°€ê¸°ëŠ¥
PointCut -  ì ìš©í•  íƒ€ê²Ÿì˜ ë©”ì„œë“œë¥¼ ì„ ë³„í•˜ëŠ” ì •ê·œì‹
Weaving  -  Targetì— ë¶€ê°€ê¸°ëŠ¥ ì²˜ë¦¬(ì‚½ì…)í•˜ëŠ” ê³¼ì •


2. AOP íŠ¹ì§•
>> í”„ë¡ì‹œ ê¸°ë°˜ aopë¥¼ ì§€ì›
- í”„ë¡ì‹œëŠ” advice(ë¶€ê°€ê¸°ëŠ¥)ì„ target(ëŒ€ìƒê°ì²´)ì— ì ìš©í•˜ë©´ì„œ ìƒì„±ë˜ëŠ” ê°ì²´
- Target(ëŒ€ìƒê°ì²´)ë¥¼ ê°ì‹¸ëŠ” í”„ë¡ì‹œëŠ” ëŸ°íƒ€ì„ ì‹œì— ìƒì„±ë¨.
- íƒ€ê²Ÿê°ì²´ì— ëŒ€í•œ í˜¸ì¶œì„ intercept(ê°€ë¡œì±„ì„œ)í•´ì„œ  
  A. ë¶€ê°€ê¸°ëŠ¥ ìˆ˜í–‰ í›„ íƒ€ê²Ÿì˜ í•µì‹¬ê¸°ëŠ¥ ë¡œì§í˜¸ì¶œ(ì „ì²˜ë¦¬)  , 
  B. íƒ€ê²Ÿì˜ í•µì‹¬ê¸°ëŠ¥ ë¡œì§í˜¸ì¶œ  ë¶€ê°€ê¸°ëŠ¥ ìˆ˜í–‰  (í›„ì²˜ë¦¬) 
  

   í˜¸ì¶œ --->   [ Proxy  [Target]  ]

3. êµ¬í˜„ë°©ì‹
1) xml
2) annotation

ì‹¤ìŠµ1) pom.xml
1. AspectJ runtime   -> AspectJrt
2. AspectJ weaver    -> AspectJweaver
3. Spring aop        -> spring-aop
4. api ë¬¸ì„œ
https://www.eclipse.org/aspectj/doc/next/runtime-api/

<!-- https://mvnrepository.com/artifact/org.aspectj/aspectjrt -->
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjrt</artifactId>
    <version>1.7.3</version>
    <!-- <scope>runtime</scope>  -->
</dependency>
<!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver -->
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjweaver</artifactId>
    <version>1.7.3</version>
    <!-- <scope>runtime</scope> -->
</dependency>
<!-- https://mvnrepository.com/artifact/org.springframework/spring-aop -->
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-aop</artifactId>
    <version>4.3.28.RELEASE</version>
</dependency>



ì‹¤ìŠµ2)  Advice + PointCut = Aspect
  ë¶€ê°€ê¸°ëŠ¥ì •ì˜   ì ìš©ë¶€ìœ„

com.company.aop_xml

>> AopTrace.java


import org.aspectj.lang.ProceedingJoinPoint;

public class AopTrace {
   public Object trace( ProceedingJoinPoint  joinPoint)  throws Throwable{
      // íƒ€ê²Ÿë©”ì„œë“œì˜ ì •ë³´
      String signature = joinPoint.getSignature().toShortString();
      System.out.println(">>>> " + signature + " START! ");
      // íƒ€ê²Ÿë©”ì„œë“œ í˜¸ì¶œì‹œê°„í™•ì¸
      long start = System.currentTimeMillis();
      // íƒ€ê²Ÿë©”ì„œë“œ í˜¸ì¶œ
      Object  result = joinPoint.proceed();
      long end  = System.currentTimeMillis();
      System.out.println("..... ì‹¤í–‰ì‹œê°„ : " + (end - start)  + "ms");
      System.out.println(">>>> " + signature + " END! ");
      return result;
   }
}


ì‹¤ìŠµ3)  servlet-context.xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:aop="http://www.springframework.org/schema/aop"
   xsi:schemaLocation="http://www.springframework.org/schema/beans    http://www.springframework.org/schema/beans/spring-beans.xsd
   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.3.xsd">
   
   <aop:config>
      <aop:aspect  id="traceAspect"   ref="aopTrace" >
         <aop:around     method="trace"  
                    pointcut="execution(public * com.company.service..*(..))"
          />
      </aop:aspect>
   </aop:config>
   
   <!-- Advice í´ë˜ìŠ¤ Bean ë“±ë¡ -->
   <bean  id="aopTrace"   class="com.company.aop_xml.AopTrace" />
</beans>



â–  MYBATIS
> ë™ì SQL 


select * from emp;
select * from where ename='Scott';
select * from emp where job='SALESMAN';

SQL êµ¬ë¬¸) MYBATIS 3ê°œ

<select id="findActiveBlogWithTitleLike"
     resultType="Blog">
  SELECT * FROM BLOG
  WHERE state = â€˜ACTIVEâ€™
  <if test="title != null">
    AND title like #{title}
  </if>
</select>

Q1> select * from emp where ${searchType} = #{keyword}
select * from where ename='Scott';
select * from emp where job='SALESMAN';

${searchType}  -> ''ì•ˆë¶™ìŒ stmt
#{keyword}  -> ìë™ ''    pstmt


Q2) select * from emp where ename=#{ename} <if test="job !=null"> and job=#{job}</if>

select * from emp where ename='SMITH'
select * from emp where ename='SMITH' and job = 'CLERK'

Q3) select * from emp where 
  <choose>
    <when test="ename != null> and ename=#{ename} </when>
    <when test="job != null> and job=#{job} </when>
    <otherwise> and mgr=#{mgr} </oterwise>
  </choose>
select * from emp where empno=7369 and mgr=7902
select * from emp where empno=7369 and ename='SMITH' and mgr=7902
select * from emp where empno=7369 and ename='SMITH' and job='CLERK'
select * from emp where empno=7369 and ename='SMITH' and job='CLERK' and mgr=7902

Q4) select * from emp
<where>
  <if test="ename  !=null"> and  ename=#{ename} </if>
  <if test="job  !=null"> and job=#{enajobme} </if>
</where>

select * from emp
select * from emp where ename = 'SMITH'
select * from emp where job = 'CLERK'
select * from emp where empno=7369 and ename='SMITH' and job ='CLERK'

Q5) 
<update>
 update emp
<set>

  <if test="ename  !=null"> ename=#{ename}, </if>
  <if test="job  !=null"> job=#{enajobme}, </if>
</set>
where empno=#{empno}
</update>

update emp set ename=#{ename}  where empno=#{empno}
update emp set job=#{job}  where empno=#{empno}
update emp set ename=#{ename}, job=#{job}  where empno=#{empno}

Q6) forEach
select * from emp
<where>
	 	 empno in
	 	 <foreach item="no" collection="list"
	 	 separator="," open="("  close=" )"> #{no}</foreach>
	</where>
  select * from emp where empno in ( 7369, 7499, 7521)

  Q7) join

> desc   authorities
  userid  varchar2(100)
  auth    varchar2(100)

create table authorities(
   userid  varchar2(100) not null,
   auth    varchar2(100) not null
)
Q1. create table
Q2. í•„ë“œëª… ë°”ê¾¸ê¸° :alter table authorities rename userid to email;
Q3. ìˆëŠ” emailë¡œ insertí•˜ê¸° :  '1@1' 'MEMBER', '1@1' 'ADMIN'

     insert into authorities ( email, auth) values('1@1', 'MEMBER')
     insert into authorities ( email, auth) values('1@1', 'ADMIN')

Q4. join ì´ìš©í•´ì„œ email, password , auth ì¶œë ¥
    select u.email, password, auth
    from appuser u, authorities a
    where u.email=a.email and u.email='1@1';

    select email, password, auth
    from appuser natural join authorities 
    where email='1@1';

    
    select u.email, password, auth
    from appuser u left join  authorities a on (u.email = a.email)
    where u.email='1@1';

    select email, password, auth
    from appuser left join  authorities using (email)
    where email='1@1';



SQL> desc authorities;
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------
 USERID                                    NOT NULL VARCHAR2(100)
 AUTH                                      NOT NULL VARCHAR2(100)



> desc   appuser
SQL> desc appuser;
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------
 APP_USER_ID                               NOT NULL NUMBER
 EMAIL                                     NOT NULL VARCHAR2(100)
 PASSWORD                                           VARCHAR2(100)
 MBTI_TYPE_ID                                       NUMBER
 CREATED_AT                                         DATE
 UFILE                                              VARCHAR2(255)

----------------------------------
#9. PAGING
----------------------------------

1. í”„ë¡œì íŠ¸ ë³µì‚¬í•˜ê¸° (SPRING005 ë³µì‚¬í•´ì„œ SPRING007_PAGING)
2. í˜ì´ì§•?
  model
    > table
        insert into sboard1  ( ID, APP_USER_ID, btitle, bcontent, bpass, bfile, bip)
        select sboard1_seq.nextval, APP_USER_ID, btitle, bcontent, bpass,bfile,bip from sboard1;

    > dto
    > dao    10ê°œì”©
    select * 
    from (
      select row_number() over( order by created_at desc) as rnum, 
      id, APP_USER_ID, btitle, bcontent, bpass, bfile, bip, bhit, created_at
    )
    where A.rnum between 1 and 10;

    1í˜ì´ì§€ ì‹œì‘1, ë 10
    2í˜ì´ì§€ ì‹œì‘11, ë 20
    3í˜ì´ì§€ ì‹œì‘21, ë 30 


    SQL> desc sboard1;
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------
 ID                                        NOT NULL NUMBER
 APP_USER_ID                               NOT NULL NUMBER
 BTITLE                                    NOT NULL VARCHAR2(1000)
 BCONTENT                                  NOT NULL CLOB
 BPASS                                     NOT NULL VARCHAR2(255)
 BFILE                                              VARCHAR2(255)
 BHIT                                               NUMBER(10)
 BIP                                       NOT NULL VARCHAR2(255)
 CREATED_AT                                         TIMESTAMP(6)